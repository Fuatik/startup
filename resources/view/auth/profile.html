<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<th:block th:replace="~{layout/main::page(title='app.profile',appMain=~{::main})}">
    <!--/*@thymesVar id="userTo" type="ru.javaops.startup.user.to.UserTo" */-->
    <main>
        <div class="card" th:object="${userTo}">
            <!--   https://www.thymeleaf.org/doc/tutorials/3.1/thymeleafspring.html#validation-and-error-messages  -->
            <form action="/ui/auth/profile" method="post">
                <div class="card-header px-4">
                    <h4 th:text="#{app.profile}"/>
                </div>
                <div class="card-body px-4">
                    <div class="mb-3 row">
                        <div class="col-md-2">
                            <label for="email" class="col-form-label" th:text="#{app.email}"/>
                        </div>
                        <div class="col-md-5 col-10">
                            <input class="form-control" id="email" th:field="*{email}" readonly>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-md-2">
                            <label for="firstName" class="col-form-label" th:text="#{app.firstName}"/>
                        </div>
                        <div class="col-md-5 col-10">
                            <input type="text" maxlength="32" class="form-control" id="firstName" th:field="*{firstName}"
                                   th:errorclass="is-invalid" th:classappend="${saved}? 'is-valid':''">
                            <div class="invalid-feedback" th:errors="*{firstName}"></div>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <div class="col-md-2">
                            <label for="lastName" class="col-form-label" th:text="#{app.lastName}"/>
                        </div>
                        <div class="col-md-5 col-10">
                            <input type="text" maxlength="32" class="form-control" id="lastName" th:field="*{lastName}"
                                   th:errorclass="is-invalid" th:classappend="${saved} ? 'is-valid':''">
                            <div class="invalid-feedback" th:errors="*{lastName}"></div>
                        </div>
                    </div>
                    <button class="btn btn-lg btn-outline-warning rounded" type="submit" th:text="#{app.save}"/>
                </div>
            </form>
            <!--            https://stackoverflow.com/a/20789795/548473 -->
            <form action="/ui/auth/profile/delete" method="post" class="ms-4 mb-3"
                  th:onsubmit="return confirm([[#{app.deleteAccountConfirm(*{email})}]])">
                <button class="btn btn-danger rounded ms-2" type="submit"><span th:text="#{app.deleteAccount}"/></button>
            </form>
        </div>
    </main>
</th:block>
</html>
